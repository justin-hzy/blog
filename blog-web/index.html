<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>首页</title>
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    <link rel="stylesheet" href="./static/css/index.css" />
    <script src="./static/js/const.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script>
    
  </head>

  <body>
    <!-- 导航 -->
    <nav class="ui inverted attached segment m-padded-tb-mini">
      <div class="ui container">
        <div class="ui inverted secondary stackable menu">
          <h2 class="ui teal header item">Blog</h2>
          <a href="http://localhost:9999/report/logon.do?userCode=0000000000&password=0000&actionType=login2" class="m-item item m-mobile-hide">首页</a>
          <a href="" class="m-item item m-mobile-hide">分类</a>
          <a href="" class="m-item item m-mobile-hide">标签</a>
          <a href="" class="m-item item m-mobile-hide">关于我</a>
          <div class="right m-item item m-mobile-hide">
            <div class="ui icon inverted transparent input">
              <input type="text" placeholder="搜索..." />
              <i class="search link icon"></i>
            </div>
          </div>
        </div>
      </div>
      <a
        href="#"
        class="ui menu toggle black icon button m-right-top m-mobile-show"
      >
        <i class="sidebar icon"></i>
      </a>
    </nav>
    <!-- 中间内容 -->
    <div class="m-padded-tb-large">
      <div class="ui container">
        <div class="ui stackable grid">
          <!-- 左边博客列表 -->
          <div class="eleven wide column">
            <!-- header -->
            <div class="ui top attached segment">
              <div class="ui middle aligned two column grid">
                <div class="column">
                  <h3 class="ui teal header">博客</h3>
                </div>
                <div class="right aligned column">
                  共
                  <h3 class="ui orange header m-inline-block m-text-lined">
                    3
                  </h3>
                  篇
                </div>
              </div>
            </div>
            <!-- content 博客列表-->
            <div id="blogList" class="ui attached segment">

            </div>
            <!-- footer -->
            <div class="ui bottom attached segment">
              <div class="ui middle aligned two column grid">
                <div class="column">
                  <a href="#" class="ui teal basic button">上一页</a>
                </div>
                <div class="right aligned column">
                  <a href="#" class="ui teal basic button">下一页</a>
                </div>
              </div>
            </div>
          </div>

          <!-- 右边的top -->
          <div class="five wide column">
            <!-- 分类 -->
            <div class="ui segments .m-margin-top-large">
              <div class="ui secondary segment">
                <div class="ui two column grid">
                  <div class="column"><i class="idea icon"></i>分类</div>
                  <div class="right aligned column">
                    <a href="#" target="_blank">
                      more <i class="angle double right icon"></i
                    ></a>
                  </div>
                </div>
              </div>
              <div class="ui teal segment">
                <div id="typeList" class="ui fluid vertical menu">

                </div>
              </div>
            </div>
            <!-- 标签 -->
            <div class="ui segments .m-margin-top-large">
              <div class="ui secondary segment">
                <div class="ui two column grid">
                  <div class="column"><i class="tags icon"></i>标签</div>
                  <div class="right aligned column">
                    <a href="#" target="_blank">
                      more <i class="angle double right icon"></i
                    ></a>
                  </div>
                </div>
              </div>
              <div id="tagList" class="ui segment">

              </div>
            </div>
            <!-- 最新推荐 -->
            <div id="recommendList" class="ui segments m-margin-top-large">
              <div class="ui secondary segment">
                <i class="bookmark icon"></i>最新推荐
              </div>

            </div>
            <!-- 二维码 -->
            <h4 class="ui horizontal divider header">扫码关注我</h4>
            <div class="ui centered card" style="width: 11em">
              <img src="../static/images/wechat.jpg" alt="" class="ui rounded image" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 底部footer -->
    <footer class="ui inverted vertical segment m-padded-tb-massvie">
      <div class="ui container">
        <div class="ui inverted divided stackable grid">
          <div class="three wide column">
            <div class="item">
              <img src="./static/images/wechat.jpg " class="ui rounded image" alt=" " style="width: 110px" />
            </div>
          </div>
          <div class="three wide column">
            <h4 class="ui inverted header m-text-thin .m-opacity-min m-opacity-min" >
              最新博客
            </h4>
            <div  class="ui inverted link list">
              <a href="# " class="item">用户故事</a>
              <a href="# " class="item">用户故事</a>
              <a href="# " class="item">用户故事</a>
            </div>
          </div>
          <div class="three wide column">
            <h4 class="ui inverted header m-text-thin .m-opacity-min m-opacity-min" >
              联系我
            </h4>
            <div class="ui inverted link list">
              <a href="# " class="item">Email:771736395@qq.com</a>
              <a href="# " class="item">QQ:771736395</a>
            </div>
          </div>
          <div class="seven wide column">
            <h4
              class="ui inverted header m-text-thin .m-opacity-min m-opacity-min"
            >
              最新博客
            </h4>
            <p class="m-text-thin .m-opacity-min m-opacity-min">
              满江红
              怒发冲冠，凭阑处、潇潇雨歇。抬望眼，仰天长啸，壮怀激烈。三十功名尘与土，八千里路云和月。莫等闲、白了少年头，空悲切。
              靖康耻，犹未雪。臣子恨，何时灭。驾长车，踏破贺兰山缺。壮志饥餐胡虏肉，笑谈渴饮匈奴血。待从头、收拾旧山河，朝天阙。
            </p>
          </div>
        </div>
        <div class="ui inverted section divider"></div>
        <p
          class="m-text-thin .m-opacity-min m-opacity-min"
          style="text-align: center"
        >
          Copyright 2016-2017 Lirenmi Designed by Lirenmi
        </p>
      </div>
    </footer>
    <script>
      $(function(){
        /* checkToken(); */
        init();
      })
      $(".menu.toggle").click(function () {
        $(".m-item").toggleClass("m-mobile-hide");
      });

      //获取blog数据
      function getBlogs(){
        $.ajax({
          type:"post",
          dataType:'json',
          data:{
             "pageNum":1,
             "pageSize":10
          },
          url:getBlogsUrl,
          success:function(result){
            if(result.data.content == undefined){

            }else{
              showBlogs(result.data.content);
              // totalPage = result.data.totalPages;
            }

          }
        })
      }

      //获取Type数据
      function getTypes() {
        $.ajax({
          type:"post",
          data:{
            // "pageNum":pageNum,
            // "pageSize":pageSize
          },
          url:getTypesUrl,
          success:function(result){
            if(result.data == undefined){

            }else{
              showTypes(result.data);
              // totalPage = result.data.totalPages;
            }

          }
        })
      }
      //获取Tag数据
      function getTags() {
        $.ajax({
          type:"post",
          data:{
            // "pageNum":pageNum,
            // "pageSize":pageSize
          },
          url:getTagsUrl,
          success:function(result){
            if(result.data == undefined){

            }else{
              showTags(result.data);
              // totalPage = result.data.totalPages;
            }

          }
        })
      }

      //获取Tag数据
      function getRecommends() {
        $.ajax({
          type:"post",
          data:{
            // "pageNum":pageNum,
            // "pageSize":pageSize
          },
          url:getRecommendUrl,
          success:function(result){
            if(result.data == undefined){

            }else{
              showRecommends(result.data);
              // totalPage = result.data.totalPages;
            }

          }
        })
      }
      /* 渲染blog数据 */
      function showBlogs(content){
        //解析json字符串为json对象形式
        var obj = content;
        //动态拼接table
        var trStr = '';
        //循环遍历出json对象中的每一个数据并显示在对应的td中
        for(var i = 0; i < obj.length; i++){
          trStr +='<div class="ui padded vertical segment m-padded-tb-big m-mobile-lr-clear" >\n' +
                  '\t<div class="ui mobile reversed stackable grid">\n' +
                  '\t  <div class="eleven wide column">\n' +
                  '\t\t<h3 class="ui header">'+obj[i].title+'</h3>\n' +
                  '\t\t<p class="m-text">\n' +obj[i].description+
                  '\n\t\t</p>\n' +
                  '\t\t<div class="ui stackable grid">\n' +
                  '\t\t  <div class="eleven wide column">\n' +
                  '\t\t\t<div class="ui mini horizontal link list">\n' +
                  '\t\t\t  <div class="item">\n' +
                  '\t\t\t\t<img src="'+obj[i].user.avatar+'" alt="" class="ui avatar image" />\n' +
                  '\t\t\t\t<div class="content">\n' +
                  '\t\t\t\t  <a href="#" class="header">'+obj[i].user.nickname+'</a>\n' +
                  '\t\t\t\t</div>\n' +
                  '\t\t\t  </div>\n' +
                  '\t\t\t  <div class="item">\n' +
                  '\t\t\t\t<i class="calendar icon"></i>'+obj[i].createtime+'</div>\n' +
                  '\t\t\t  <div class="item"><i class="eye icon"></i>'+ obj[i].views+'</div>\n' +
                  '\t\t\t</div>\n' +
                  '\t\t  </div>\n' +
                  '\t\t  <div class="right aligned five wide column">\n' +
                  '\t\t\t<a href="#" target="_blank" class="ui teal basic label m-padded-tiny m-text-thin" >'+obj[i].type.typeName+'</a>\n' +
                  '\t\t  </div>\n' +
                  '\t\t</div>\n' +
                  '\t  </div>\n' +
                  '\t  <div class="five wide column">\n' +
                  '\t\t<a href="#" target="_blank">\n' +
                  '\t\t  <img src="'+obj[i].firstpicture+'" alt="" class="ui rounded image"/>\n' +
                  '\t\t</a>\n' +
                  '\t  </div>\n' +
                  '\t</div>\n' +
                  '</div>'

        }
        $("#blogList").append(trStr);
      }

      function showTypes(content) {
        //解析json字符串为json对象形式
        var obj = content;
        //动态拼接table
        var trStr = '';
        //循环遍历出json对象中的每一个数据并显示在对应的td中
        for(var i = 0; i < obj.length; i++){
          trStr +='<a href="#" class="item">\n' +
                  '\t'+obj[i].typeName+'\n' +
                  '\t<div class="ui teal basic left pointing label">'+obj[i].blogNum+'</div>\n' +
                  '</a>'

        }
        $("#typeList").append(trStr);
      }

      function showTags(content) {
        //解析json字符串为json对象形式
        var obj = content;
        //动态拼接table
        var trStr = '';
        //循环遍历出json对象中的每一个数据并显示在对应的td中
        for(var i = 0; i < obj.length; i++){
          trStr +='<a  href="#" target="blank" class="ui teal basic left pointing label m-margin-tb-tiny" >\n' +
                  '\t'+obj[i].tagName+'\n' +
                  '\t<div class="detail">'+obj[i].blogNum+'</div>\n' +
                  '</a>'

        }
        $("#tagList").append(trStr);
      }

      function showRecommends(content) {
        //解析json字符串为json对象形式
        var obj = content;
        //动态拼接table
        var trStr = '';
        //循环遍历出json对象中的每一个数据并显示在对应的td中
        for(var i = 0; i < obj.length; i++){
          trStr +='<div class="ui segment">\n' +
                  '\t<a href="#" target="_blank" class="m-black m-text-thin" >'+obj[i].title+'</a>\n' +
                  '</div>'
        }
        $("#recommendList").append(trStr);
      }


      function init(){
        getBlogs(0);
        getTypes();
        getTags();
        getRecommends();
        // lastPage();
        // nextPage();
        // var url = window.location;
        // if(url.toString().indexOf("?")>=0){
        //   checkStatus();
        // }

      }
    </script>
  </body>
</html>
